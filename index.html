<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NML ‚Äî NIS Media League</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- Loading overlay -->
  <div id="loading" class="loading-overlay">
    <div class="loading-spinner"></div>
    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
  </div>

  <div class="app" id="app" style="display:none">

    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <div class="logo-icon">NML</div>
          <div class="logo-text">
            <h1>NIS Media League</h1>
            <p>–®–∫–æ–ª—å–Ω–∞—è —Ñ—É—Ç–±–æ–ª—å–Ω–∞—è –ª–∏–≥–∞ &bull; –°–µ–∑–æ–Ω 2025/26</p>
          </div>
        </div>
        <div class="admin-access">
          <span id="adminBadge" class="admin-badge" hidden>ADMIN</span>
          <div id="codeBox" class="code-box" hidden>
            <input type="password" id="adminCode" placeholder="–ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞" autocomplete="off">
          </div>
          <button id="lockBtn" class="lock-btn" title="–í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞">üîí</button>
        </div>
      </div>
    </header>

    <!-- Stats bar -->
    <div class="stats-bar">
      <div class="stat-card">
        <span class="stat-value" id="statTeams">16</span>
        <span class="stat-label">–ö–æ–º–∞–Ω–¥</span>
      </div>
      <div class="stat-card">
        <span class="stat-value" id="statPlayed">0</span>
        <span class="stat-label">–ú–∞—Ç—á–µ–π —Å—ã–≥—Ä–∞–Ω–æ</span>
      </div>
      <div class="stat-card">
        <span class="stat-value" id="statGoals">0</span>
        <span class="stat-label">–ì–æ–ª–æ–≤ –∑–∞–±–∏—Ç–æ</span>
      </div>
      <div class="stat-card">
        <span class="stat-value" id="statRemaining">64</span>
        <span class="stat-label">–ú–∞—Ç—á–µ–π –æ—Å—Ç–∞–ª–æ—Å—å</span>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="nav">
      <button class="nav-btn active" data-tab="table">–¢–∞–±–ª–∏—Ü–∞</button>
      <button class="nav-btn" data-tab="matches">–ú–∞—Ç—á–∏</button>
      <button class="nav-btn" data-tab="playoff">–ü–ª–µ–π-–æ—Ñ—Ñ</button>
      <button class="nav-btn" data-tab="admin">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
    </nav>

    <!-- Tabs -->
    <div class="tab-content">

      <!-- League Table -->
      <section id="tab-table" class="tab active">
        <div class="zone-legend">
          <span class="zone-badge zone-playoff">–ü–ª–µ–π-–æ—Ñ—Ñ (1-6)</span>
          <span class="zone-badge zone-qual">–°—Ç—ã–∫–æ–≤—ã–µ (7-10)</span>
          <span class="zone-badge zone-out">–í–Ω–µ –∑–æ–Ω—ã (11-16)</span>
        </div>
        <div class="table-wrapper">
          <table class="league-table">
            <thead>
              <tr>
                <th class="col-pos">#</th>
                <th class="col-team">–ö–æ–º–∞–Ω–¥–∞</th>
                <th>P</th><th>W</th><th>D</th><th>L</th>
                <th>GS</th><th>GC</th><th>GD</th>
                <th class="col-pts">Pts</th>
              </tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>
      </section>

      <!-- Matches -->
      <section id="tab-matches" class="tab">
        <div id="matchdays"></div>
      </section>

      <!-- Playoff -->
      <section id="tab-playoff" class="tab">
        <div id="playoffContent"></div>
      </section>

      <!-- Admin -->
      <section id="tab-admin" class="tab">
        <div class="admin-grid">
          <div class="admin-card">
            <h3>–ù–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥</h3>
            <p class="hint">–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –Ω–∞–∂–º–∏—Ç–µ Enter –∏–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –≤–Ω–µ –ø–æ–ª—è</p>
            <div id="teamList" class="team-list"></div>
          </div>
          <div class="admin-card">
            <h3>–ñ–µ—Ä–µ–±—å—ë–≤–∫–∞</h3>
            <p class="hint">–û–¥–∏–Ω–∞–∫–æ–≤–æ–µ —á–∏—Å–ª–æ = –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–±—Ä–æ—Å–∏—Ç –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.</p>
            <div class="seed-row">
              <input type="number" id="seedInput" placeholder="–ß–∏—Å–ª–æ –¥–ª—è –∂–µ—Ä–µ–±—å—ë–≤–∫–∏">
              <button id="generateBtn" class="btn-accent">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
          </div>
          <div class="admin-card">
            <h3>–ò–º–ø–æ—Ä—Ç / –≠–∫—Å–ø–æ—Ä—Ç –º–∞—Ç—á–µ–π</h3>
            <p class="hint">–ó–∞–≥—Ä—É–∑–∏—Ç–µ JSON —Å –≥–æ—Ç–æ–≤—ã–º–∏ –º–∞—Ç—á–∞–º–∏ –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Ç–µ–∫—É—â–∏–µ.</p>
            <div class="import-export-row">
              <button id="exportMatchesBtn" class="btn-secondary">–°–∫–∞—á–∞—Ç—å –º–∞—Ç—á–∏</button>
              <label class="btn-accent file-label">
                –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–∞—Ç—á–∏
                <input type="file" id="importMatchesFile" accept=".json" hidden>
              </label>
            </div>
            <details class="import-hint-details">
              <summary>–§–æ—Ä–º–∞—Ç JSON</summary>
              <pre class="import-hint-code">[
  {
    "home": "–ö–æ–º–∞–Ω–¥–∞ –ê",
    "away": "–ö–æ–º–∞–Ω–¥–∞ –ë",
    "home_goals": 2,
    "away_goals": 1,
    "round": 1,
    "match_type": "group"
  }
]</pre>
            </details>
          </div>
          <div class="admin-card">
            <h3>–ò–º–ø–æ—Ä—Ç / –≠–∫—Å–ø–æ—Ä—Ç —Ç–∞–±–ª–∏—Ü—ã</h3>
            <p class="hint">–ó–∞–≥—Ä—É–∑–∏—Ç–µ JSON —Å –≥–æ—Ç–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ–π –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Ç–µ–∫—É—â—É—é.</p>
            <div class="import-export-row">
              <button id="exportTableBtn" class="btn-secondary">–°–∫–∞—á–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É</button>
              <label class="btn-accent file-label">
                –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
                <input type="file" id="importTableFile" accept=".json" hidden>
              </label>
            </div>
            <div id="customTableBadge" class="custom-table-badge" hidden>
              –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
              <button id="clearCustomTable" class="btn-ghost btn-small">–°–±—Ä–æ—Å–∏—Ç—å</button>
            </div>
            <details class="import-hint-details">
              <summary>–§–æ—Ä–º–∞—Ç JSON</summary>
              <pre class="import-hint-code">[
  {
    "name": "–ö–æ–º–∞–Ω–¥–∞ –ê",
    "p": 8, "w": 5, "d": 2, "l": 1,
    "gs": 15, "gc": 8, "pts": 17
  }
]</pre>
            </details>
          </div>
          <div class="admin-card">
            <h3>–°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö</h3>
            <p class="hint">–£–¥–∞–ª–∏—Ç –≤—Å–µ –º–∞—Ç—á–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –ö–æ–º–∞–Ω–¥—ã –æ—Å—Ç–∞–Ω—É—Ç—Å—è.</p>
            <button id="resetBtn" class="btn-danger">–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –º–∞—Ç—á–∏</button>
          </div>
        </div>
      </section>

    </div>

    <footer class="footer">
      NML ‚Äî NIS Media League &bull; –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Supabase
    </footer>
  </div>

  <!-- Modal -->
  <div id="modal" class="modal-overlay" hidden>
    <div class="modal">
      <h3 id="modalTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Ç—á–∞</h3>
      <div class="modal-match">
        <div class="modal-team">
          <span id="modalHomeName">-</span>
          <input type="number" id="modalHomeGoals" min="0" value="0">
        </div>
        <span class="modal-vs">:</span>
        <div class="modal-team">
          <input type="number" id="modalAwayGoals" min="0" value="0">
          <span id="modalAwayName">-</span>
        </div>
      </div>
      <div class="modal-actions">
        <button id="modalSave" class="btn-accent">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button id="modalClear" class="btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å</button>
        <button id="modalCancel" class="btn-ghost">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" hidden></div>

  <!-- Supabase JS v2 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
